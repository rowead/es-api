---
classes:
  - ntp
  - timezone
  - java
  - nodejs
  - nginx
  - elasticsearch

ntp::package_ensure: latest
ntp::enable: true
ntp::servers:
  - 0.au.pool.ntp.org
  - 1.au.pool.ntp.org
  - 2.au.pool.ntp.org
  - 3.au.pool.ntp.org

timezone::timezone: Australia/Perth

java::repository: 'webupd8team'
java::distribution: 'oracle'
java::release: 'java7'
java::accept_oracle_license: true

nodejs::npm:ensure: 'present'

#nginx::nginx_upstreams:
#  elasticsearch:
#    ensure: present
#      members:
#        - localhost:9200
#nginx::nginx_locations:
#  es_proxy:
#    location: '/'
#    ensure: present

elasticsearch::manage_repo: true
elasticsearch::repo_version: '2.x'
#elasticsearch::package_pin: true
elasticsearch::version: '2.2.1'
elasticsearch::java_install: false
elasticsearch::ensure: 'present'
elasticsearch::restart_on_change: true
elasticsearch::pid_dir: '/var/run'
elasticsearch::instances:
  es-01:
    config:
      node.name: 'pseudo-gary'
      network.host: '0.0.0.0'
      network.bind_host: 0
elasticsearch::plugins:
  'mobz/elasticsearch-head':
    ensure: 'present'
    instances:
      - es-01
  'lmenezes/elasticsearch-kopf/2.0':
    ensure: 'present'
    instances:
      - es-01
  'swagger':
    ensure: 'present'
    url: 'https://github.com/timschlechter/swagger-for-elasticsearch/raw/master/dist/swagger-for-elasticsearch-2.2.1.zip'
    instances:
      - es-01
  'elasticsearch-sql':
    ensure: 'present'
    url: 'https://github.com/NLPchina/elasticsearch-sql/releases/download/2.2.1.0/elasticsearch-sql-2.2.1.0.zip'
    instances:
      - es-01
#  'sscarduzio/elasticsearch-readonlyrest-plugin':
#    url: 'https://github.com/sscarduzio/elasticsearch-readonlyrest-plugin/raw/master/download/elasticsearch-readonlyrest-v1.8_es-v2.1.1.zip'
#    instances:
#      - es-01
#  'etsy/es-restlog':
#    url: 'https://github.com/etsy/es-restlog/releases/download/0.4/es-restlog-0.4-es_2_1_1.zip'
#    instances:
#      - es-01